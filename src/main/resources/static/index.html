<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>교대 근무표</title>
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#007AFF" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <header>
    <h1>교대 근무표</h1>
    <p>나의 근무 일정과 알림</p>
  </header>
  <main>
    <section id="pattern-setup" hidden>
      <h2>근무 패턴 설정</h2>
      <form class="pattern-form" id="patternForm">
        <label>
          근무 패턴 (쉼표로 구분)
          <input type="text" id="patternInput" placeholder="D,A,N,O" required />
        </label>
        <label>
          패턴 시작일
          <input type="date" id="patternStartDate" required />
        </label>
        <label>
          알림 시간 (근무 시작 전 5-240분)
          <input type="number" id="patternMinutes" min="5" max="240" value="60" />
        </label>
        <button type="submit">패턴 저장</button>
      </form>
    </section>

    <section id="today-section" hidden>
      <h2>오늘과 다음 일정</h2>
      <div class="today-card" id="todayCard"></div>
      <div class="upcoming-list" id="upcomingList"></div>
    </section>

    <section id="calendar-section" hidden>
      <div class="calendar-header">
        <button type="button" id="prevMonth">◀</button>
        <h2 id="calendarTitle"></h2>
        <button type="button" id="nextMonth">▶</button>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>
      <div class="summary-list" id="summaryList"></div>
      <div class="legend">
        <div class="legend-item">D = 주간 (06:00-14:00)</div>
        <div class="legend-item">A = 오후 (14:00-22:00)</div>
        <div class="legend-item">N = 야간 (22:00-06:00)</div>
        <div class="legend-item">O = 휴무</div>
      </div>
    </section>

    <section id="day-detail" hidden>
      <h2>날짜 상세</h2>
      <div class="day-detail-panel" id="dayDetailPanel"></div>
      <form class="day-detail-form" id="dayDetailForm">
        <label>
          근무 변경 (D/A/N/O 또는 비움)
          <input type="text" id="detailCode" maxlength="1" />
        </label>
        <label>
          메모
          <textarea id="detailMemo" rows="3" placeholder="메모를 입력하세요"></textarea>
        </label>
        <label class="checkbox-label">
          <input type="checkbox" id="repeatYearly" />
          <span>매년 반복</span>
        </label>
        <button type="submit">저장</button>
      </form>
    </section>

    <section id="notifications" hidden>
      <h2>알림 설정</h2>
      <form class="notification-form" id="notificationForm">
        <label>
          근무 시작 전 알림 시간
          <input type="number" id="notificationMinutes" min="5" max="240" />
        </label>
        <button type="submit">알림 시간 저장</button>
      </form>
      <button type="button" id="subscribePush" class="secondary">푸시 알림 활성화</button>
    </section>
  </main>

  <script type="module" src="/js/main.js"></script>
</body>
</html>
